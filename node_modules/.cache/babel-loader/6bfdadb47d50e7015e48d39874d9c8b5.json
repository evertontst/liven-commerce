{"ast":null,"code":"import _objectSpread from\"/Users/evertonluis/jobs/liven-commerce/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{MdDelete,MdAddCircleOutline,MdRemoveCircleOutline}from'react-icons/md';import{useCart}from'../../hooks/useCart';import{priceBRL}from'../../util/format';import{Container,ProductTable,Total}from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cart=function Cart(){var _useCart=useCart(),cart=_useCart.cart,removeProduct=_useCart.removeProduct,updateProductAmount=_useCart.updateProductAmount;var cartFormatted=cart.map(function(product){return _objectSpread(_objectSpread({},product),{},{priceFormatted:priceBRL(product.price),subTotal:priceBRL(product.price*product.amount)});});var total=priceBRL(cart.reduce(function(sumTotal,product){return sumTotal+product.price*product.amount;},0));function handleProductIncrement(product){updateProductAmount({productId:product.id,amount:product.amount+1});}function handleProductDecrement(product){updateProductAmount({productId:product.id,amount:product.amount-1});}function handleRemoveProduct(productId){removeProduct(productId);}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(ProductTable,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{\"aria-label\":\"product image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRODUTO\"}),/*#__PURE__*/_jsx(\"th\",{children:\"QTD\"}),/*#__PURE__*/_jsx(\"th\",{children:\"SUBTOTAL\"}),/*#__PURE__*/_jsx(\"th\",{\"aria-label\":\"delete icon\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cartFormatted.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{\"data-testid\":\"product\",children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.title})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:product.title}),/*#__PURE__*/_jsx(\"span\",{children:product.priceFormatted})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-testid\":\"decrement-product\",disabled:product.amount<=1,onClick:function onClick(){return handleProductDecrement(product);},children:/*#__PURE__*/_jsx(MdRemoveCircleOutline,{size:20})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",\"data-testid\":\"product-amount\",readOnly:true,value:product.amount}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-testid\":\"increment-product\",onClick:function onClick(){return handleProductIncrement(product);},children:/*#__PURE__*/_jsx(MdAddCircleOutline,{size:20})})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:product.subTotal})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-testid\":\"remove-product\",onClick:function onClick(){return handleRemoveProduct(product.id);},children:/*#__PURE__*/_jsx(MdDelete,{size:20})})})]},product.id);})})]}),/*#__PURE__*/_jsxs(\"footer\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",children:\"Finalizar pedido\"}),/*#__PURE__*/_jsxs(Total,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"strong\",{children:total})]})]})]});};export default Cart;","map":{"version":3,"names":["React","MdDelete","MdAddCircleOutline","MdRemoveCircleOutline","useCart","priceBRL","Container","ProductTable","Total","Cart","cart","removeProduct","updateProductAmount","cartFormatted","map","product","priceFormatted","price","subTotal","amount","total","reduce","sumTotal","handleProductIncrement","productId","id","handleProductDecrement","handleRemoveProduct","image","title"],"sources":["/Users/evertonluis/jobs/liven-commerce/src/pages/Cart/index.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  MdDelete,\n  MdAddCircleOutline,\n  MdRemoveCircleOutline,\n} from 'react-icons/md';\n\nimport { useCart } from '../../hooks/useCart';\nimport { priceBRL } from '../../util/format';\nimport { Container, ProductTable, Total } from './styles';\n\ninterface Product {\n  id: number;\n  title: string;\n  price: number;\n  image: string;\n  amount: number;\n}\n\nconst Cart = (): JSX.Element => {\n  const { cart, removeProduct, updateProductAmount } = useCart();\n\n  const cartFormatted = cart.map(product => ({\n    ...product,\n    priceFormatted: priceBRL(product.price),\n    subTotal: priceBRL(product.price * product.amount)\n  }))\n  const total =\n    priceBRL(\n      cart.reduce((sumTotal, product) => {\n        return sumTotal + product.price * product.amount \n      }, 0)\n    )\n\n  function handleProductIncrement(product: Product) {\n    updateProductAmount({ productId: product.id, amount: product.amount+1 });\n  }\n\n  function handleProductDecrement(product: Product) {\n    updateProductAmount({ productId: product.id, amount: product.amount-1 });\n  }\n\n  function handleRemoveProduct(productId: number) {\n    removeProduct(productId)\n  }\n\n  return (\n    <Container>\n      <ProductTable>\n        <thead>\n          <tr>\n            <th aria-label=\"product image\" />\n            <th>PRODUTO</th>\n            <th>QTD</th>\n            <th>SUBTOTAL</th>\n            <th aria-label=\"delete icon\" />\n          </tr>\n        </thead>\n        <tbody>\n          {cartFormatted.map(product => {\n          return (\n            <tr data-testid=\"product\" key={product.id}>\n              <td>\n                <img src={product.image} alt={product.title} />\n              </td>\n              <td>\n                <strong>{product.title}</strong>\n                <span>{product.priceFormatted}</span>\n              </td>\n              <td>\n                <div>\n                  <button\n                    type=\"button\"\n                    data-testid=\"decrement-product\"\n                    disabled={product.amount <= 1}\n                    onClick={() => handleProductDecrement(product)}\n                  >\n                    <MdRemoveCircleOutline size={20} />\n                  </button>\n                  <input\n                    type=\"text\"\n                    data-testid=\"product-amount\"\n                    readOnly\n                    value={product.amount}\n                  />\n                  <button\n                    type=\"button\"\n                    data-testid=\"increment-product\"\n                    onClick={() => handleProductIncrement(product)}\n                  >\n                    <MdAddCircleOutline size={20} />\n                  </button>\n                </div>\n              </td>\n              <td>\n                <strong>{product.subTotal}</strong>\n              </td>\n              <td>\n                <button\n                  type=\"button\"\n                  data-testid=\"remove-product\"\n                  onClick={() => handleRemoveProduct(product.id)}\n                >\n                  <MdDelete size={20} />\n                </button>\n              </td>\n            </tr>\n            )\n          })}\n        </tbody>\n      </ProductTable>\n\n      <footer>\n        <button type=\"button\">Finalizar pedido</button>\n\n        <Total>\n          <span>TOTAL</span>\n          <strong>{total}</strong>\n        </Total>\n      </footer>\n    </Container>\n  );\n};\n\nexport default Cart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}